
-- Drop Tables

DROP TABLE tb_bd2_pergunta CASCADE CONSTRAINT;
DROP TABLE tb_bd2_categoria CASCADE CONSTRAINT;
DROP TABLE tb_bd2_funcionario CASCADE CONSTRAINT;
DROP TABLE tb_bd2_setor_empresa CASCADE CONSTRAINT;
DROP TABLE tb_bd2_setor CASCADE CONSTRAINT;
DROP TABLE tb_bd2_empresa CASCADE CONSTRAINT;


-- Script de criacao do banco


create table tb_bd2_empresa (
id_empresa integer,
ds_nome varchar(60),
ds_cnpj varchar(14),
Primary key(id_empresa));


create table tb_bd2_setor (
id_setor integer,
ds_nome_area_atuacao varchar(60),
Primary key(id_setor));


create table tb_bd2_setor_empresa(
id_setor integer,
id_empresa integer,
Constraint SETOR_FK Foreign key (id_setor) References tb_bd2_setor (id_setor),
Constraint EMPRESA_FK Foreign key (id_empresa) References tb_bd2_empresa (id_empresa),
Constraint tb_PK PRIMARY KEY(id_setor,id_empresa));


create table tb_bd2_funcionario (
id_funcionario integer,
id_empresa integer,
id_superior_funcionario integer,
ds_nome varchar(60),
ds_cpf varchar(11),
ds_email varchar(200),
Foreign key (id_empresa) References tb_bd2_empresa (id_empresa),
Foreign key (id_superior_funcionario) References tb_bd2_funcionario (id_funcionario),
Primary key(id_funcionario));


create table tb_bd2_categoria(
id_categoria integer,
id_pertence_categoria integer,
ds_nome varchar(60),
Foreign key (id_pertence_categoria) References tb_bd2_categoria (id_categoria),
Primary key(id_categoria));


create table tb_bd2_pergunta (
id_pergunta integer,
id_funcionario integer,
id_categoria integer,
ds_tipo_pergunta varchar(60),
ds_corpo_pergunta varchar(255),
Foreign key (id_funcionario) References tb_bd2_funcionario (id_funcionario),
Foreign key (id_categoria) References tb_bd2_categoria (id_categoria),
Primary key(id_pergunta));


-- Inserts



-- Tabela Setores

INSERT
INTO tb_bd2_setor (id_setor, ds_nome_area_atuacao)
VALUES (101, 'Agronegocio');

INSERT
INTO tb_bd2_setor (id_setor, ds_nome_area_atuacao)
VALUES (102, 'Comercio');

INSERT
INTO tb_bd2_setor (id_setor, ds_nome_area_atuacao)
VALUES (103, 'Investimento');

INSERT
INTO tb_bd2_setor (id_setor, ds_nome_area_atuacao)
VALUES (104, 'Educacao');

INSERT
INTO tb_bd2_setor (id_setor, ds_nome_area_atuacao)
VALUES (105, 'Exportacao');



-- Tabela Empresas

INSERT
INTO tb_bd2_empresa (id_empresa, ds_nome, ds_cnpj)
VALUES (1011, 'SilverLight','82684742000148');

INSERT
INTO tb_bd2_empresa (id_empresa, ds_nome, ds_cnpj)
VALUES (1012, 'Adobe','35186316000102');

INSERT
INTO tb_bd2_empresa (id_empresa, ds_nome, ds_cnpj)
VALUES (1013, 'MicroSystem','10170121000135');

INSERT
INTO tb_bd2_empresa (id_empresa, ds_nome, ds_cnpj)
VALUES (1014, 'MoonInc  ','04271513000198');

INSERT
INTO tb_bd2_empresa (id_empresa, ds_nome, ds_cnpj)
VALUES (1015, 'StepFoward  ','66450106000103');



-- Tabela Setor_Empresa

INSERT
INTO tb_bd2_setor_empresa (id_setor, id_empresa)
VALUES (103,1011);

INSERT
INTO tb_bd2_setor_empresa (id_setor, id_empresa)
VALUES (105,1012);

INSERT
INTO tb_bd2_setor_empresa (id_setor, id_empresa)
VALUES (104,1013);

INSERT
INTO tb_bd2_setor_empresa (id_setor, id_empresa)
VALUES (103,1014);

INSERT
INTO tb_bd2_setor_empresa (id_setor, id_empresa)
VALUES (105,1015);



-- Tabela Categoria

INSERT
INTO tb_bd2_categoria (id_categoria, ds_nome)
VALUES (111,'Economia');

INSERT
INTO tb_bd2_categoria (id_categoria, id_pertence_categoria, ds_nome)
VALUES (112,111,'Lucros');

INSERT
INTO tb_bd2_categoria (id_categoria, id_pertence_categoria, ds_nome)
VALUES (113,111,'Custos');

INSERT
INTO tb_bd2_categoria (id_categoria, ds_nome)
VALUES (114,'Social');

INSERT
INTO tb_bd2_categoria (id_categoria, ds_nome)
VALUES (115,'Ambiental');



-- Tabela Funcionario

INSERT
INTO tb_bd2_funcionario (id_funcionario, id_empresa, ds_nome, ds_cpf, ds_email)
VALUES (31,1011, 'Leonardo Fuso', '55531155077', 'leonardo@hotmail.com');

INSERT
INTO tb_bd2_funcionario (id_funcionario, id_empresa, id_superior_funcionario, ds_nome, ds_cpf, ds_email)
VALUES (32,1011,31, 'Lucas Tormin', '70630113084', 'lucas@hotmail.com');

INSERT
INTO tb_bd2_funcionario (id_funcionario, id_empresa, ds_nome, ds_cpf, ds_email)
VALUES (33,1012,'Rodrigo Lima', '99796378035', 'rrl@hotmail.com');

INSERT
INTO tb_bd2_funcionario (id_funcionario, id_empresa, id_superior_funcionario, ds_nome, ds_cpf, ds_email)
VALUES (34,1012,33, 'João Silva', '43545036030', 'jsilva@hotmail.com');

INSERT
INTO tb_bd2_funcionario (id_funcionario, id_empresa, ds_nome, ds_cpf, ds_email)
VALUES (35,1013,'Paulo Costa', '77280327044', 'costa@hotmail.com');




-- Tabela Pergunta

INSERT
INTO tb_bd2_pergunta (id_pergunta, id_funcionario, id_categoria, ds_tipo_pergunta, ds_corpo_pergunta)
VALUES (101, 31, 112, 'DISCURSIVA', 'Qual é o lucro médio anual?');

INSERT
INTO tb_bd2_pergunta (id_pergunta, id_funcionario, id_categoria, ds_tipo_pergunta, ds_corpo_pergunta)
VALUES (102, 32, 113, 'DISCURSIVA', 'Onde está o maior custo atualmente?');

INSERT
INTO tb_bd2_pergunta (id_pergunta, id_funcionario, id_categoria, ds_tipo_pergunta, ds_corpo_pergunta)
VALUES (103, 33, 114, 'LIKERT', 'Os serviços sociais estão:');

INSERT
INTO tb_bd2_pergunta (id_pergunta, id_funcionario, id_categoria, ds_tipo_pergunta, ds_corpo_pergunta)
VALUES (104, 34, 115, 'DISCURSIVA', 'Qual a sua opinião sobre as políticas ambientais atuais da empresa?');

INSERT
INTO tb_bd2_pergunta (id_pergunta, id_funcionario, id_categoria, ds_tipo_pergunta, ds_corpo_pergunta)
VALUES (105, 35, 113, 'LIKERT', 'Quão razoáveis são os seus custos:');
